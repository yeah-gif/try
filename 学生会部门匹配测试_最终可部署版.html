
<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å­¦ç”Ÿä¼šéƒ¨é—¨åŒ¹é…æµ‹è¯•</title>

<style>
body{
font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
max-width:900px;
margin:30px auto;
padding:20px;
background:linear-gradient(135deg,#eef2f7,#dde7f5);
}
h1{text-align:center;}
.card{
background:white;
padding:18px;
border-radius:14px;
margin-bottom:20px;
box-shadow:0 6px 18px rgba(0,0,0,0.05);
}
button{
padding:12px 22px;
border:none;
border-radius:10px;
background:#1F3C88;
color:white;
font-size:16px;
cursor:pointer;
}
.result{
margin-top:30px;
padding:20px;
background:white;
border-radius:14px;
}
.progress{
height:10px;
background:#eee;
border-radius:5px;
margin-top:6px;
margin-bottom:15px;
}
.progress-inner{
height:10px;
border-radius:5px;
}
canvas{display:none;}
</style>
</head>
<body>

<h1>ğŸ¯ æµ‹ä½ é€‚åˆå­¦ç”Ÿä¼šå“ªä¸ªéƒ¨é—¨</h1>
<form id="quiz"></form>

<div style="text-align:center;">
<button onclick="calculate()">æŸ¥çœ‹åŒ¹é…ç»“æœ</button>
</div>

<div id="result" class="result"></div>

<div style="text-align:center;margin-top:20px;">
<button onclick="generatePoster()" id="posterBtn" style="display:none;">ç”Ÿæˆä¸“å±ä¸»é¢˜æµ·æŠ¥</button>
</div>

<canvas id="posterCanvas" width="800" height="1200"></canvas>

<script>

const deptColors={
ç»¼åˆ:"#1F3C88",
å†…è”:"#F4A261",
å¤–è”:"#7B2CBF",
å­¦ä¹ :"#2A9D8F",
ç”Ÿæ´»:"#E76F51",
æ–‡è‰º:"#D63384",
ä½“è‚²:"#FF6B00",
å®£ä¼ :"#00A8E8",
æ–‡åŒ–:"#C6A700",
å›½é™…:"#3A0CA3"
};

let departments={};
Object.keys(deptColors).forEach(d=>{
departments[d]={score:0};
});

const questions=[
["å¦‚æœå­¦æ ¡çªç„¶æ–­ç½‘2å°æ—¶ï¼Œä½ ä¼šï¼Ÿ",
["ç«‹åˆ»æ¢³ç†æƒ…å†µã€åè°ƒè§£å†³",["ç»¼åˆ",2],["å†…è”",1]],
["çœ‹çœ‹åŒå­¦æœ€ç€æ€¥ä»€ä¹ˆ",["ç”Ÿæ´»",2],["å†…è”",1]],
["è®°å½•ä¸‹è¿™ä¸ªæœ‰è¶£ç¬é—´",["å®£ä¼ ",2],["æ–‡åŒ–",1]],
["å»æ“åœºæ´»åŠ¨ä¸€ä¸‹",["ä½“è‚²",2],["æ–‡è‰º",1]]
],
["ä½ æ›´äº«å—å“ªç§æˆå°±æ„Ÿï¼Ÿ",
["æ´»åŠ¨ä»0åˆ°1å®Œæ•´è½åœ°",["ç»¼åˆ",2],["å¤–è”",1]],
["æ‹‰åˆ°èµ„æºè®©å¤§å®¶å—ç›Š",["å¤–è”",2],["å›½é™…",1]],
["å…¨åœºæ°”æ°›è¢«ç‚¹ç‡ƒ",["æ–‡è‰º",2],["ä½“è‚²",1]],
["ä¸€æ¬¡é«˜è´¨é‡æ€æƒ³äº¤æµ",["å­¦ä¹ ",2],["æ–‡åŒ–",1]]
],
["é¢å¯¹éš¾é¢˜ä½ ç¬¬ä¸€ååº”ï¼Ÿ",
["å…ˆç†æ¸…é€»è¾‘ç»“æ„",["ç»¼åˆ",2],["å­¦ä¹ ",1]],
["çœ‹çœ‹èƒ½å¦å€ŸåŠ©å¤–éƒ¨èµ„æº",["å¤–è”",2],["å›½é™…",1]],
["å¬å¬å¤§å®¶çœŸå®éœ€æ±‚",["ç”Ÿæ´»",2],["å†…è”",1]],
["æ¢ç§è¡¨è¾¾æ–¹å¼è§£å†³",["å®£ä¼ ",2],["æ–‡è‰º",1]]
],
["å¦‚æœé‚€è¯·å˜‰å®¾è¿›æ ¡å›­ï¼Œä½ æ›´æƒ³ï¼Ÿ",
["ä¼ä¸šå®¶/æ ¡å‹å¤§å’–",["å¤–è”",2],["ç»¼åˆ",1]],
["å­¦æœ¯åäºº",["å­¦ä¹ ",2],["æ–‡åŒ–",1]],
["å›½é™…å­¦ç”Ÿä»£è¡¨",["å›½é™…",2],["å†…è”",1]],
["ä½“è‚²å† å†›",["ä½“è‚²",2],["æ–‡è‰º",1]]
],
["ä½ åœ¨å›¢é˜Ÿé‡Œæ›´åƒï¼Ÿ",
["ç¨³å®šåæ–¹çš„ç»„ç»‡è€…",["ç»¼åˆ",2],["å†…è”",1]],
["æ°”æ°›æ‹…å½“",["æ–‡è‰º",2],["ä½“è‚²",1]],
["ç»†å¿ƒåè°ƒçš„äºº",["å†…è”",2],["ç”Ÿæ´»",1]],
["è¿æ¥ä¸åŒåœˆå­çš„äºº",["å›½é™…",2],["å¤–è”",1]]
],
["ä½ æœ€å…³æ³¨æ ¡å›­å“ªæ–¹é¢ï¼Ÿ",
["åˆ¶åº¦æµç¨‹æ˜¯å¦é¡ºç•…",["ç»¼åˆ",2],["å­¦ä¹ ",1]],
["åŒå­¦æƒç›Šæ˜¯å¦è¢«å¬è§",["ç”Ÿæ´»",2],["å†…è”",1]],
["æ–‡åŒ–æ´»åŠ¨æ˜¯å¦å¤šå…ƒ",["æ–‡åŒ–",2],["æ–‡è‰º",1]],
["å›½é™…äº¤æµæ˜¯å¦ä¸°å¯Œ",["å›½é™…",2],["å¤–è”",1]]
],
["çœ‹åˆ°ä¸€ä¸ªä¼˜ç§€æ´»åŠ¨ï¼Œä½ æ›´å…³æ³¨ï¼Ÿ",
["æµç¨‹è®¾è®¡æ˜¯å¦ä¸¥å¯†",["ç»¼åˆ",2],["å­¦ä¹ ",1]],
["ç°åœºæ°›å›´æ˜¯å¦çƒ­çƒˆ",["æ–‡è‰º",2],["ä½“è‚²",1]],
["ä¼ æ’­æ•ˆæœå¦‚ä½•",["å®£ä¼ ",2],["æ–‡åŒ–",1]],
["åˆä½œèµ„æºæ˜¯å¦å¼ºå¤§",["å¤–è”",2],["å›½é™…",1]]
],
["å¦‚æœç­–åˆ’æ ¡å›­èŠ‚ï¼Œä½ æ›´æƒ³è´Ÿè´£ï¼Ÿ",
["æ•´ä½“ç»Ÿç­¹",["ç»¼åˆ",2],["å†…è”",1]],
["èˆå°èŠ‚ç›®",["æ–‡è‰º",2],["æ–‡åŒ–",1]],
["å¯¹å¤–åˆä½œ",["å¤–è”",2],["å›½é™…",1]],
["è§†è§‰ä¸ä¼ æ’­",["å®£ä¼ ",2],["æ–‡åŒ–",1]]
],
["ä½ ç†æƒ³ä¸­çš„å¤§å­¦æ”¶è·æ˜¯ï¼Ÿ",
["ç»„ç»‡èƒ½åŠ›æˆé•¿",["ç»¼åˆ",2],["å†…è”",1]],
["æ€æƒ³ä¸è®¤çŸ¥å‡çº§",["å­¦ä¹ ",2],["æ–‡åŒ–",1]],
["å›½é™…è§†é‡æ‹“å±•",["å›½é™…",2],["å¤–è”",1]],
["å¥åº·ä¸æ´»åŠ›",["ä½“è‚²",2],["ç”Ÿæ´»",1]]
],
["ä½ æ›´æ„¿æ„æˆä¸ºå“ªç§äººï¼Ÿ",
["è¢«å¤§å®¶ä¿¡ä»»çš„å®šæµ·ç¥é’ˆ",["ç»¼åˆ",2],["å†…è”",1]],
["æŠŠä¸–ç•Œå¸¦è¿›æ ¡å›­çš„äºº",["å›½é™…",2],["æ–‡åŒ–",1]],
["è®²è¿°æ ¡å›­æ•…äº‹çš„äºº",["å®£ä¼ ",2],["æ–‡è‰º",1]],
["è®©å›¢é˜Ÿæ›´æ¸©æš–çš„äºº",["å†…è”",2],["ç”Ÿæ´»",1]]
]
];

const quiz=document.getElementById("quiz");

questions.forEach((q,i)=>{
let div=document.createElement("div");
div.className="card";
div.innerHTML="<b>"+(i+1)+". "+q[0]+"</b><br>";
for(let j=1;j<q.length;j++){
div.innerHTML+=`
<label>
<input type="radio" name="q${i}" 
data-main="${q[j][1][0]}" data-mainv="${q[j][1][1]}"
data-sub="${q[j][2][0]}" data-subv="${q[j][2][1]}">
${q[j][0]}
</label><br>`;
}
quiz.appendChild(div);
});

let topResults=[];

function calculate(){

Object.keys(departments).forEach(d=>departments[d].score=0);

questions.forEach((q,i)=>{
let selected=document.querySelector(`input[name="q${i}"]:checked`);
if(selected){
departments[selected.dataset.main].score+=parseInt(selected.dataset.mainv);
departments[selected.dataset.sub].score+=parseInt(selected.dataset.subv);
}
});

let maxScore=questions.length*2;
let sorted=Object.entries(departments)
.map(d=>[d[0],Math.round(d[1].score/maxScore*100)])
.sort((a,b)=>b[1]-a[1])
.slice(0,3);

topResults=sorted;

let result=document.getElementById("result");
result.innerHTML="<h2>ğŸ† ä½ çš„åŒ¹é…ç»“æœ</h2>";

sorted.forEach(dep=>{
result.innerHTML+=`
<h3 style="color:${deptColors[dep[0]]}">${dep[0]} ${dep[1]}%</h3>
<div class="progress">
<div class="progress-inner" style="width:${dep[1]}%;background:${deptColors[dep[0]]}"></div>
</div>
`;
});

document.getElementById("posterBtn").style.display="inline-block";
}

function generatePoster(){
const canvas=document.getElementById("posterCanvas");
const ctx=canvas.getContext("2d");

let mainDept=topResults[0][0];
let color=deptColors[mainDept];

ctx.fillStyle=color;
ctx.fillRect(0,0,800,1200);

ctx.fillStyle="#ffffff";
ctx.font="bold 60px sans-serif";
ctx.fillText("å­¦ç”Ÿä¼šéƒ¨é—¨åŒ¹é…ç»“æœ",80,150);

ctx.font="50px sans-serif";
let y=350;
topResults.forEach(dep=>{
ctx.fillText(dep[0]+"  "+dep[1]+"%",200,y);
y+=150;
});

ctx.font="40px sans-serif";
ctx.fillText("ç¬¬ä¸€åŒ¹é…éƒ¨é—¨ï¼š"+mainDept,180,1000);

let link=document.createElement("a");
link.download="åŒ¹é…ç»“æœ-"+mainDept+".png";
link.href=canvas.toDataURL();
link.click();
}

</script>
</body>
</html>
