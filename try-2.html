<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2685.4">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="zh"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1">&lt;meta charset="UTF-8"&gt;</p>
<p class="p1">&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1">&lt;title&gt;å­¦ç”Ÿä¼šéƒ¨é—¨åŒ¹é…æµ‹è¯•&lt;/title&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;style&gt;</p>
<p class="p1">body{</p>
<p class="p1">font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;</p>
<p class="p1">max-width:850px;</p>
<p class="p1">margin:30px auto;</p>
<p class="p1">padding:20px;</p>
<p class="p1">background:linear-gradient(135deg,#eef2f7,#d9e4f5);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">h1{text-align:center;}</p>
<p class="p2"><br></p>
<p class="p1">.card{</p>
<p class="p1">background:white;</p>
<p class="p1">padding:18px;</p>
<p class="p1">border-radius:14px;</p>
<p class="p1">margin-bottom:20px;</p>
<p class="p1">box-shadow:0 6px 18px rgba(0,0,0,0.05);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">button{</p>
<p class="p1">padding:12px 22px;</p>
<p class="p1">border:none;</p>
<p class="p1">border-radius:10px;</p>
<p class="p1">background:#1F3C88;</p>
<p class="p1">color:white;</p>
<p class="p1">font-size:16px;</p>
<p class="p1">cursor:pointer;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">.progress{</p>
<p class="p1">height:8px;</p>
<p class="p1">background:#eee;</p>
<p class="p1">border-radius:5px;</p>
<p class="p1">margin-top:6px;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">.progress-inner{</p>
<p class="p1">height:8px;</p>
<p class="p1">border-radius:5px;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">.result{</p>
<p class="p1">margin-top:30px;</p>
<p class="p1">padding:20px;</p>
<p class="p1">background:white;</p>
<p class="p1">border-radius:14px;</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">canvas{display:none;}</p>
<p class="p1">&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;h1&gt;ğŸ¯ å­¦ç”Ÿä¼šéƒ¨é—¨åŒ¹é…æµ‹è¯•&lt;/h1&gt;</p>
<p class="p1">&lt;form id="quiz"&gt;&lt;/form&gt;</p>
<p class="p1">&lt;div style="text-align:center;"&gt;</p>
<p class="p1">&lt;button onclick="calculate()"&gt;æŸ¥çœ‹åŒ¹é…ç»“æœ&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;div id="result" class="result"&gt;&lt;/div&gt;</p>
<p class="p1">&lt;div style="text-align:center;margin-top:20px;"&gt;</p>
<p class="p1">&lt;button onclick="generatePoster()" id="posterBtn" style="display:none;"&gt;ç”Ÿæˆä¸“å±ä¸»é¢˜æµ·æŠ¥&lt;/button&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;canvas id="posterCanvas" width="800" height="1200"&gt;&lt;/canvas&gt;</p>
<p class="p2"><br></p>
<p class="p1">&lt;script&gt;</p>
<p class="p2"><br></p>
<p class="p1">const deptColors={</p>
<p class="p1">ç»¼åˆ:"#1F3C88",</p>
<p class="p1">å†…è”:"#F4A261",</p>
<p class="p1">å¤–è”:"#7B2CBF",</p>
<p class="p1">å­¦ä¹ :"#2A9D8F",</p>
<p class="p1">ç”Ÿæ´»:"#E76F51",</p>
<p class="p1">æ–‡è‰º:"#D63384",</p>
<p class="p1">ä½“è‚²:"#FF6B00",</p>
<p class="p1">å®£ä¼ :"#00A8E8",</p>
<p class="p1">æ–‡åŒ–:"#C6A700",</p>
<p class="p1">å›½é™…:"#3A0CA3"</p>
<p class="p1">};</p>
<p class="p2"><br></p>
<p class="p1">let departments={};</p>
<p class="p1">Object.keys(deptColors).forEach(d=&gt;{</p>
<p class="p1">departments[d]={score:0};</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">const questions=[</p>
<p class="p1">["ä½ æ›´äº«å—ï¼Ÿ",</p>
<p class="p1">["æ•´ä½“ç»Ÿç­¹",["ç»¼åˆ",2],["å†…è”",1]],</p>
<p class="p1">["åˆ›æ„è¡¨è¾¾",["å®£ä¼ ",2],["æ–‡è‰º",1]],</p>
<p class="p1">["å¯¹å¤–æ²Ÿé€š",["å¤–è”",2],["å›½é™…",1]],</p>
<p class="p1">["è§£å†³å®é™…é—®é¢˜",["ç”Ÿæ´»",2],["å­¦ä¹ ",1]]</p>
<p class="p1">],</p>
<p class="p2"><br></p>
<p class="p1">["ä½ åœ¨å›¢é˜Ÿé‡Œï¼Ÿ",</p>
<p class="p1">["ç§©åºç»´æŠ¤è€…",["ç»¼åˆ",2],["å†…è”",1]],</p>
<p class="p1">["æ°”æ°›åˆ¶é€ è€…",["æ–‡è‰º",2],["ä½“è‚²",1]],</p>
<p class="p1">["èµ„æºè¿æ¥è€…",["å¤–è”",2],["å›½é™…",1]],</p>
<p class="p1">["å†…å®¹åˆ›ä½œè€…",["å®£ä¼ ",2],["æ–‡åŒ–",1]]</p>
<p class="p1">],</p>
<p class="p2"><br></p>
<p class="p1">["ä½ æ›´å…³æ³¨æ ¡å›­ï¼Ÿ",</p>
<p class="p1">["åˆ¶åº¦æµç¨‹",["ç»¼åˆ",2],["å­¦ä¹ ",1]],</p>
<p class="p1">["æƒç›Šå…³æ€€",["ç”Ÿæ´»",2],["å†…è”",1]],</p>
<p class="p1">["æ–‡åŒ–æ°›å›´",["æ–‡åŒ–",2],["æ–‡è‰º",1]],</p>
<p class="p1">["å›½é™…äº¤æµ",["å›½é™…",2],["å¤–è”",1]]</p>
<p class="p1">]</p>
<p class="p1">];</p>
<p class="p2"><br></p>
<p class="p1">// è‡ªåŠ¨å¤åˆ¶åˆ°10é¢˜</p>
<p class="p1">while(questions.length&lt;10){</p>
<p class="p1">questions.push(questions[questions.length%3]);</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">const quiz=document.getElementById("quiz");</p>
<p class="p2"><br></p>
<p class="p1">questions.forEach((q,i)=&gt;{</p>
<p class="p1">let div=document.createElement("div");</p>
<p class="p1">div.className="card";</p>
<p class="p1">div.innerHTML="&lt;b&gt;"+(i+1)+". "+q[0]+"&lt;/b&gt;&lt;br&gt;";</p>
<p class="p1">for(let j=1;j&lt;q.length;j++){</p>
<p class="p1">div.innerHTML+=`</p>
<p class="p1">&lt;label&gt;</p>
<p class="p1">&lt;input type="radio" name="q${i}" data-main="${q[j][1][0]}" data-mainv="${q[j][1][1]}"</p>
<p class="p1">data-sub="${q[j][2][0]}" data-subv="${q[j][2][1]}"&gt;</p>
<p class="p1">${q[j][0]}</p>
<p class="p1">&lt;/label&gt;&lt;br&gt;`;</p>
<p class="p1">}</p>
<p class="p1">quiz.appendChild(div);</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">let topResults=[];</p>
<p class="p2"><br></p>
<p class="p1">function calculate(){</p>
<p class="p2"><br></p>
<p class="p1">Object.keys(departments).forEach(d=&gt;departments[d].score=0);</p>
<p class="p2"><br></p>
<p class="p1">questions.forEach((q,i)=&gt;{</p>
<p class="p1">let selected=document.querySelector(`input[name="q${i}"]:checked`);</p>
<p class="p1">if(selected){</p>
<p class="p1">departments[selected.dataset.main].score+=parseInt(selected.dataset.mainv);</p>
<p class="p1">departments[selected.dataset.sub].score+=parseInt(selected.dataset.subv);</p>
<p class="p1">}</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">let maxScore=20; // ç†è®ºæœ€å¤§å€¼</p>
<p class="p2"><br></p>
<p class="p1">let sorted=Object.entries(departments)</p>
<p class="p1">.map(d=&gt;[d[0],Math.round(d[1].score/maxScore*100)])</p>
<p class="p1">.sort((a,b)=&gt;b[1]-a[1])</p>
<p class="p1">.slice(0,3);</p>
<p class="p2"><br></p>
<p class="p1">topResults=sorted;</p>
<p class="p2"><br></p>
<p class="p1">let result=document.getElementById("result");</p>
<p class="p1">result.innerHTML="&lt;h2&gt;ğŸ† ä½ çš„åŒ¹é…ç»“æœ&lt;/h2&gt;";</p>
<p class="p2"><br></p>
<p class="p1">sorted.forEach(dep=&gt;{</p>
<p class="p1">result.innerHTML+=`</p>
<p class="p1">&lt;h3 style="color:${deptColors[dep[0]]}"&gt;${dep[0]} ${dep[1]}%&lt;/h3&gt;</p>
<p class="p1">&lt;div class="progress"&gt;</p>
<p class="p1">&lt;div class="progress-inner" style="width:${dep[1]}%;background:${deptColors[dep[0]]}"&gt;&lt;/div&gt;</p>
<p class="p1">&lt;/div&gt;</p>
<p class="p1">`;</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">document.getElementById("posterBtn").style.display="inline-block";</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">function generatePoster(){</p>
<p class="p1">const canvas=document.getElementById("posterCanvas");</p>
<p class="p1">const ctx=canvas.getContext("2d");</p>
<p class="p2"><br></p>
<p class="p1">let mainDept=topResults[0][0];</p>
<p class="p1">let color=deptColors[mainDept];</p>
<p class="p2"><br></p>
<p class="p1">ctx.fillStyle=color;</p>
<p class="p1">ctx.fillRect(0,0,800,1200);</p>
<p class="p2"><br></p>
<p class="p1">ctx.fillStyle="#ffffff";</p>
<p class="p1">ctx.font="bold 60px sans-serif";</p>
<p class="p1">ctx.fillText("å­¦ç”Ÿä¼šéƒ¨é—¨åŒ¹é…ç»“æœ",80,150);</p>
<p class="p2"><br></p>
<p class="p1">ctx.font="50px sans-serif";</p>
<p class="p1">let y=350;</p>
<p class="p1">topResults.forEach(dep=&gt;{</p>
<p class="p1">ctx.fillText(dep[0]+"<span class="Apple-converted-space">Â  </span>"+dep[1]+"%",200,y);</p>
<p class="p1">y+=150;</p>
<p class="p1">});</p>
<p class="p2"><br></p>
<p class="p1">ctx.font="40px sans-serif";</p>
<p class="p1">ctx.fillText("ä½ çš„ç¬¬ä¸€åŒ¹é…éƒ¨é—¨ï¼š"+mainDept,150,1000);</p>
<p class="p2"><br></p>
<p class="p1">let link=document.createElement("a");</p>
<p class="p1">link.download="åŒ¹é…ç»“æœ-"+mainDept+".png";</p>
<p class="p1">link.href=canvas.toDataURL();</p>
<p class="p1">link.click();</p>
<p class="p1">}</p>
<p class="p2"><br></p>
<p class="p1">&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
